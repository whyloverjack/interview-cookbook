| 	          | Memcached	                                                                                                                                                                                              | Redis                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 
|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 介绍         | memcache是一个高性能分布式缓存系统。使用场景一般是将数据缓存在memcache（mc）中，从而实现数据的存储和查询都进行在内存中，减少了数据库的查询次数，从而提升系统的性能。mc的数据完全存储在内存中，不会将数据持久化到磁盘中，机器重启会导致内存数据丢失。mc有一套自定义的内存管理策略，可以避免内存碎片问题。	                                        | Redis（全称为Remote Dictionary Server）是一个开源的高性能键值对存储系统，具有快速、灵活和可扩展的特性。它是一个基于内存的数据结构存储系统，可以用作数据库、缓存和消息代理。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 共同点        | 都是基于内存的数据库，一般都用来当做缓存使用。,都有过期策略, 两者的性能都非常高。                                                                                                                                                              |
| 亚毫秒级延迟     | 是                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 开发人员易用性    | 是                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 数据分区       | 是                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 支持多种编程语言   | 是                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 高级数据结构     | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 多线程架构      | 是(采用多线程模型，使用线程池来处理并发请求。在高并发情况下，可以通过多线程处理请求提高吞吐量)                                                                                                                                                        | 否(采用单线程模型，通过异步I/O来实现高性能。它可以处理并发请求，并且没有锁竞争，因此具有较低的线程开销)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 快照         | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 复制         | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 事务处理       | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 发布/订阅      | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Lua 脚本编写   | ·                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 地理空间支持     | -                                                                                                                                                                                                       | 是                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 数据类型       | memcache支持简单数据类型，需要客户端自己处理复杂对象 k/v                                                                                                                                                                      | Redis不仅仅支持简单的k/v类型的数据，同时还提供String，List,Set,Hash,Sorted Set,pub/sub,Transactions, GEO地址位置, HyperLogLog数据结构的存储                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 持久化        | 不提供持久化支持，数据只存在于内存中。服务器重启后，所有数据将被清空。需要依赖一些第三方的工具实现持久化                                                                                                                                                    | 提供持久化机制，支持快照（snapshotting）和AOF（Append-only file）两种方式。这样可以在服务器重启后恢复数据，防止数据丢失。Redis默认优先通过AOF重放来恢复缓存，仅仅会丢失很小一部分数据. 内存管理. Memcached使用Slab Allocation机制来管理内存, 主要思想就是：预先将申请的内存空间划分为一系列的Slab，每个Slab只负责一定范围大小数据的存储。如果需要申请内存，那么每次申请的大小为一个Page，申请后会将这个Page切分成多个Chunk，实际数据存储在Chunk中。这样不会造成内存碎片，但是数据大小比Chunk小时，会造成空间浪费. Memcached使用惰性过期策略，并不会到期就立即清理过期数据，而是当访问该数据时进行检查。或者当内存分配失败后，使用LRU算法来淘汰数据。内存一旦分配，Memcached便不会对其进行回收，而是在同一个Slab中重复利用。因为Memcached不回收内存，所以即使所有数据都过期，对Memcached进行Flush操作，其占用的系统内存并不会减少。Redis使用jemalloc来进行内存分配，在减小内存碎片方面要比malloc/free做的更好。相比于Memcached，Redis的内存管理要简单得多，在需要时Redis就会申请内存，数据被清理时就会释放，所以在一定程度上会存在内存碎片。好处是清理后的内存会返还给操作系统，不会出现Memcached那种内存只增不减的情况 |.当开启了Redis的虚拟内存(vm)后，如果物理内存使用量超过了最大限制，将引起swap操作，把一定的数据交换到磁盘上，当需要这些数据的时候，再从磁盘中取出放入内存里。内存中始终会保存所有的key信息，swap时会计算出哪些key对应的value需要进行交换。这个特性使得Redis可以保存超过机器内存大小的数据，但同时频繁的swap以及从磁盘读取会对其性能造成影响                                                                                                               |
| 数据一致性      | 不支持自动备份和故障转移，不具备数据一致性保障                                                                                                                                                                                 | 支持主从复制和Sentinel哨兵机制，可以实现数据的自动备份和故障转移，提供更高的可用性和数据一致性                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 集群扩展能力     | 分布式缓存 Memcached服务节点之间不支持相互通信，所以对于Memcached服务器来说，不支持数据共享机制。Memcached的分布式集群只能由客户端实现的，在获取数据前，客户端使用一定的路由算法（通常是一致性哈希算法）计算出数据所在的存储节点，然后向该节点发送相应的操作请求 分布式缓存                                                    | Redis服务器之间利用分片和主从机制来构造分布式集群。一个Redis集群正常工作至少三个主节点，主节点相互通信，确定各自负责的数据分片。主节点各自拥有冗余的从节点，从节点会复制对应主节点的数据，当主节点不可用时，就会在相应从节点中提升一个成为主节点，保证单点故障时整个集群的可用性。为了保证主节点的响应性能，Redis集群不保证数据的强一致性：执行写命令后，主节点立即返回，数据复制到从节点的操作是异步的，此时如果获取该数据，就可能出现取不到的情况。"                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 集成扩展是否简单   | 扩容简单、易部署是Memcached集群的特点。因为Memcached服务器之间不会互相通信，所以Memcached集群可以做到几乎无限制的线性伸缩，利用多台低配机器也能达到很好的性能效果。利用客户端实现的一致性hash路由算法以及引入虚拟节点，增减服务器也不会对当前缓存命中率有较大的影响。但是一旦出现单点故障，因为没有备份机制，缓存的读写都会出现问题，压力转移到数据库，引起性能甚至更严重的问题 | Redis集群在扩容、部署方面相比于Memcached就复杂了许多。Redis集群增减主节点都会引起数据的重新分片，如果此时集群正在服务，可能会带来性能上的开销。但是因为主从机制，以及从节点提升容灾，遇到单点故障时也能保证服务的可用性                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 生态系统和社区    | 社区相对较小，生态系统相对简单。文档和教程相对较少                                                                                                                                                                               | 拥有庞大的开源社区和丰富的生态系统，提供了许多工具、扩展和解决方案。有大量的文档和教程可用于参考                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
